---
title: "geniusr"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

[![Build Status](https://travis-ci.org/ewenme/geniusr.png)](https://travis-ci.org/ewenme/geniusr) 

Tools for working with the Genius API.

- Genius Developers Site: [https://genius.com/developers](https://genius.com/developers)
- Genius API Docs: [https://docs.genius.com/](https://docs.genius.com/)

## Install

Development version

```{r install_dev, eval=FALSE}
devtools::install_github('ewenme/geniusr')
```

## Authenticate

1. [Create a Genius API client](https://genius.com/api-clients/new)
2. Generate a client access token from your [API Clients page](https://genius.com/api-clients)
3. Set your credentials in the System Environment variable `GENIUS_API_TOKEN` by calling the `genius_token()` function and entering your Genius Client Access Token when prompted.

## Use

```{r load_pkg}
library(geniusr)
library(dplyr)
library(tidytext)
```

### How many times did Kanye West say "good morning", on the track "Good Morning"?

```{r good_morning_count}
# Get song search results for the term 'good morning'
gm_search <- search_song(search_term = "good morning") %>%
  # look for Kanye as the primary artist
  filter(artist_name == "Kanye West")

# get lyrics
gm_lyrics <- scrape_lyrics_id(song_id = gm_search$song_id)

# tokenization of the lyrics
gm_lyrics %>%
  # get bigrams
  unnest_tokens(bigram, line, token = "ngrams", n = 2) %>%
  # count bigram frequency
  count(bigram) %>%
  # look for good morning
  filter(bigram == "good morning")
```

### Gimme artist's with 'Lil' in their name.

```{r lil_names}
# return artist matches for term 'lil'
search_artist(search_term = "Lil", n_results = 500) %>% 
  distinct(artist_name)

```

### Which artist's has Kendrick Lamar featured with the most?

```{r kendrick_features}
# get kendricks discography INCLUDING features
kendrick_discog <- get_artist_songs(artist_id = 1421, include_features = TRUE)

kendrick_discog %>%
  # isolate features
  filter(artist_id != 1421) %>%
  # count features
  count(artist_id, artist_name, sort = T) %>%
  # get top ten
  top_n(10, wt=n)

```

### Sentiment Analysis of Illmatic

```{r illmatic_sentiment}



```

